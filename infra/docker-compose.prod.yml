# Production overrides (explicit usage)
#
# Usage: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d
#
# This file contains production-specific settings

services:
  # MongoDB - Production settings
  mongodb:
    container_name: mongodb-prod
    restart: unless-stopped
    # For production, consider using managed MongoDB (Atlas, AWS DocumentDB)
    # and remove this service entirely

  # Redis - Production settings
  redis:
    container_name: redis-prod
    restart: unless-stopped
    # For production, consider using managed Redis (AWS ElastiCache, Redis Cloud)

  # MCP Server - Production settings
  mcp-server:
    container_name: mcp-server-prod
    restart: unless-stopped
    env_file:
      - ../apps/mcp-server/.env.prod
    volumes:
      - ../data:/app/data:ro  # Read-only in production
    environment:
      - ENV=production

  # Agent - Production settings
  agent:
    container_name: agent-prod
    restart: unless-stopped
    env_file:
      - ../apps/agent/.env.prod
    environment:
      - ENV=production

  # API Gateway - Production settings
  api-gateway:
    container_name: api-gateway-prod
    restart: unless-stopped
    build:
      target: production
    env_file:
      - ../apps/api-gateway/.env.prod
    environment:
      - ENV=production

  # Web - Production settings
  web:
    container_name: web-prod
    restart: unless-stopped
    build:
      target: production
    ports:
      - "80:80"  # Nginx production port
    environment:
      - NODE_ENV=production
